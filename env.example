# ==============================================================================
#             Crypto AI News Aggregator - Environment Configuration
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to '.env' (e.g., `cp .env.example .env`).
# 2. Fill in the values for the REQUIRED SETTINGS.
# 3. Adjust APPLICATION SETTINGS as needed.
# 4. Configure OPTIONAL SERVICES if you plan to use them.
# 5. Use MAINTENANCE SETTINGS with caution.
# 6. NEVER commit your actual '.env' file to Git.
#
# ==============================================================================
#                       REQUIRED SETTINGS
# ==============================================================================

# ----- Telegram API Credentials -----
# Obtain these by creating an app at https://my.telegram.org/apps
TELEGRAM_API_ID=
TELEGRAM_API_HASH=

# This string is generated by logging in via the 'generate-session' script.
# It allows the application to log in to your Telegram account. KEEP IT SECRET!
# How to Generate:
#   1. Fill in TELEGRAM_API_ID and TELEGRAM_API_HASH above.
#   2. Run 'npm install' (if you haven't already).
#   3. Run 'npm run generate-session'.
#   4. Follow the prompts and paste the output string here.
#   (See readme.md for more details).
TELEGRAM_SESSION_STRING=

# ----- Telegram Channel -----
# The public username (e.g., @some_channel) or private channel ID (e.g., -100...)
TELEGRAM_CHANNEL=

# ----- AI Service Configuration (OpenRouter) -----
# Your API key(s) from https://openrouter.ai/keys. Comma-separated for multiple keys.
OPENROUTER_API_KEYS=

# ----- Redis Connection -----
# The full connection URL for your Redis instance (local or cloud).
REDIS_URL=redis://localhost:6379

# ----- Site Configuration -----
# Your application's public base URL. CRITICAL for CORS and OpenRouter headers.
SITE_URL=http://localhost:3000

# ==============================================================================
#                       APPLICATION SETTINGS
# ==============================================================================

# ----- Core Functionality -----
# Comma-separated pairs of CryptoSymbol:CoinGeckoID for price fetching.
CRYPTO_SYMBOLS=BTC:bitcoin,ETH:ethereum,SOL:solana

# Max number of Telegram messages to fetch per poll cycle. (Default: 25)
MESSAGE_FETCH_LIMIT=25

# Max number of processed articles to keep in the Redis cache. (Default: 25)
MAX_ARTICLES=25

# Lock duration (seconds) for processing a message. (Default: 60)
PROCESSING_LOCK_TTL=60

# How often (in milliseconds) to check Telegram for new messages. (Default: 60000 = 1 min)
POLL_INTERVAL=60000

# ----- AI Model Configuration -----
# Comma-separated list of AI models from OpenRouter, in order of preference.
OPENROUTER_MODELS=meta-llama/llama-3-70b-instruct

# AI processing request timeout (milliseconds). (Default: 20000 = 20s)
MODEL_TIMEOUT=20000

# ----- Branding & Display -----
# Name used in API headers (Default: Crypto AI News)
SITE_NAME="Crypto AI News"

# ----- Performance & Hosting -----
# Server port. Often overridden by hosting platforms. (Default: 3000)
PORT=3000

# Set to 'production' for deployments. (Default: production)
NODE_ENV=production

# Trust level for proxy headers (X-Forwarded-For). (Default: 1)
PROXY_TRUST_LEVEL=1

# ==============================================================================
#                       PRICE TRACKING SERVICE
# ==============================================================================

# Comma-separated list of Price API URLs, in order of preference.
PRICE_API_URLS=https://api.coingecko.com/api/v3/simple/price

# How often (in milliseconds) to fetch crypto prices. (Default: 150000 = 150s)
PRICE_POLL_INTERVAL=150000

# Max price history points per symbol in Redis. (Default: 1440)
PRICE_HISTORY_LIMIT=1440

# Timeout (in milliseconds) for price API requests. (Default: 8000 = 8s)
PRICE_API_TIMEOUT=8000

# ==============================================================================
#                  OPTIONAL SERVICES (Webhook)
# ==============================================================================

# URL to POST updates (articles & prices) to. Leave empty to disable.
WEBHOOK_TARGET_URL=

# How often (in minutes) to check for updates to send via webhook. (Default: 1)
WEBHOOK_INTERVAL_MINUTES=1

# Optional: Auth token for webhook target.
# WEBHOOK_AUTH_TOKEN=your_secret_token

# ==============================================================================
#                       MAINTENANCE SETTINGS
# ==============================================================================

# WARNING: Set 'true' ONLY to WIPE Redis on next start/deploy. (Default: false)
DO_FLUSH_REDIS=false